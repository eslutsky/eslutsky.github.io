<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8 lt-ie7" lang="en-us"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8" lang="en-us"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie10 lt-ie9" lang="en-us"> <![endif]-->
<!--[if IE 9]> <html class="no-js lt-ie10 lt-ie9" lang="en-us"> <![endif]-->
<!--[if lt IE 10]> <html class="no-js lt-ie10" lang="en-us"> <![endif]-->
<!--[if !IE]> > <![endif]-->
<html class='no-js' lang='en'>
<!-- <![endif] -->
<head>
<title>
IDE &mdash;
oVirt
</title>
<meta charset='utf-8'>
<meta content='' name='description'>
<meta content='' name='author'>
<meta content='initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width' name='viewport'>

<link href='/images/favicon.ico' rel='shortcut icon'>
<link href='/images/apple-touch-icon-precomposed.png' rel='apple-touch-icon-precomposed'>
<link href='/images/apple-touch-icon-57x57-precomposed.png' rel='apple-touch-icon-precomposed' sizes='57x57'>
<link href='/images/apple-touch-icon-72x72-precomposed.png' rel='apple-touch-icon-precomposed' sizes='72x72'>
<link href='/images/apple-touch-icon-114x114-precomposed.png' rel='apple-touch-icon-precomposed' sizes='114x114'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>
<link href="/stylesheets/application.css?1560777611" rel="stylesheet" type="text/css" />
<link href="/stylesheets/print.css?1560777612" rel="stylesheet" type="text/css" media="print" />
</head>
<body class=' source-md'>
<header class='masthead hidden-print' id='branding' role='banner'>
<section class='hgroup'></section>
<div id='access'>
<nav id="mainNav" class="navbar-fixed-top affix-top navForMobileHack" style="font-family: 'Open Sans', sans-serif; display: flex; justify-content: center;">
      <a href="/"><img id="logo" style="float: left; margin-right: 70px; height: 40px; padding: 0; margin-top: 12px;" alt="oVirt" src="/images/logo.svg"></a>
      <div>
          <div class="navbar-header page-scroll" style="min-width: 170px">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu_id0980fddf">
                  <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
              </button>
          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="menu_id0980fddf">

              <ul class="nav navbar-nav">
                  <li class="hidden active">
                      <a href="#page-top"></a>
                  </li>
<li role='menuitem'>
  <a href='/'>Home</a>
</li>

<li role='menuitem'>
  <a href='/download/'>Download</a>
</li>

<li role='menuitem'>
  <a href='/documentation/'>Documentation</a>
</li>

<li role='menuitem'>
  <a href='/develop/'>Developers</a>
</li>

<li role='menuitem'>
  <a href='/community/'>Community</a>
</li>

<li role='menuitem'>
  <a href='//lists.ovirt.org/archives/'>Forum</a>
</li>

<li role='menuitem'>
  <a href='/blog/'>Blog</a>
</li>

              </ul>
          </div>
          <!-- /.navbar-collapse -->
      </div>
      <!-- /.container-fluid -->
  </nav>

</div>
</header>

<section class='page-wrap' id='page-wrap'>
<section class='page' id='page'>
<ul class='breadcrumb'>
<li><a href="/develop/">Develop</a></li>
<li><a href="/develop/developer-guide/">Developer-guide</a></li>
<li><a href="/develop/developer-guide/engine/">Engine</a></li>
<li><a href="/develop/developer-guide/engine/building/">Building</a></li>
</ul>

<section class='container content' id='content'>
<!--[if lt IE 7]>
<p class="chromeframe">You are using an outdated browser.
<a href="http://browsehappy.com/">Upgrade your browser today</a> or
<a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
<![endif]-->
<h1 id="ide">IDE</h1>

<h2 id="using-ide-for-ovirt-engine">Using IDE for oVirt Engine</h2>

<h3 id="reason">Reason</h3>

<p>Java IDE Is very much like Vegemite<a href="http://en.wikipedia.org/wiki/Vegemite">1</a>;
Some really really like it, some like it as Marmite<a href="http://en.wikipedia.org/wiki/Marmite">2</a> and some like it as Cenovis<a href="http://en.wikipedia.org/wiki/Cenovis">3</a>.
Others, simply can't stand the thought of it…</p>

<p>As for Java IDE, some like Eclipse, some like Net Beans,
and others can't stand the thought of anything which is not <strong>VI</strong>.</p>

<p>This page is intended for those who would like to use some sort of
a graphical development environment, which does not require the use
of 'esc'+':' combination ;)</p>

<h3 id="eclipse">Eclipse</h3>

<ul>
  <li>Recommended due to JBoss integration.</li>
  <li>May be used with Python as well: <a href="http://wiki.python.org/moin/EclipsePythonIntegration">http://wiki.python.org/moin/EclipsePythonIntegration</a></li>
  <li>Current Eclipse release is Luna.
    <ul>
      <li>Available from <a href="http://www.eclipse.org/downloads/">http://www.eclipse.org/downloads/</a>, or yum install eclipse under Fedora.</li>
      <li>Use the J2EE distribution for developers.</li>
    </ul>
  </li>
</ul>

<h4 id="setting-up-ovirt-engine-development-environment-in-eclipse">Setting up oVirt engine development environment in Eclipse</h4>

<ul>
  <li>Before you start, perform a maven build from command line (refer <a href="Building oVirt engine">Building oVirt engine</a>). This makes sure that the generated code is available, and you won't see too many compilation errors in eclipse after importing the projects.</li>
</ul>

<!-- -->

<ul>
  <li>Install Maven plugin for Eclipse, if it is not installed by default
    <ul>
      <li>Note: This is only relevant to old Eclipse version. In Eclipse Juno (and later), this plugin is bundled by default.</li>
      <li>Note: If you are using Maven 2.2, make sure you use m2e version 0.12.XXX, as later versions are not compatible with it.</li>
    </ul>
  </li>
</ul>

<!-- -->

<div class="highlight"><pre class="highlight plaintext"><code>&gt;&gt; open help --&gt; &#x000A;   install new software --&gt; &#x000A;   choose the Luna location --&gt;&#x000A;   filter by m2e&#x000A;&gt;&gt; check all components, install and restart eclipse at the end&#x000A;</code></pre></div>
<ul>
  <li>Fix maven version</li>
</ul>

<!-- -->

<div class="highlight"><pre class="highlight plaintext"><code>&gt;&gt; open Windows --&gt; &#x000A;   Preferences --&gt; &#x000A;   Maven --&gt; &#x000A;   Installations&#x000A;&gt;&gt; Choose 3 installation. If it's not there, use the 'add' button and add the path to your Maven 3 installation.&#x000A;</code></pre></div>
<ul>
  <li>Import sources:</li>
</ul>

<!-- -->

<div class="highlight"><pre class="highlight plaintext"><code>&gt;&gt; file --&gt; &#x000A;   import --&gt; &#x000A;   Maven --&gt; &#x000A;   Existing Maven Projects --&gt; &#x000A;   browse into your engine sources direcotry and click OK&#x000A;</code></pre></div>
<ul>
  <li>You may need to first build the project directly through maven as some referenced projects are auto generated. close eclipse, build with maven and open eclipse again.</li>
</ul>

<!-- -->

<ul>
  <li>Make sure that you import the engine code formatter into eclipse <strong>before</strong> starting development. The engine maven build uses <a href="http://checkstyle.sourceforge.net">checkstyle</a> to check coding standards. One of the standards checked is that the code should not contain tabs or trailing whitespaces. Since eclipse inserts tabs by default for code formatting, you can end up with a lot of compilation errors in command line maven build if you don't follow this (and the next) step.</li>
</ul>

<!-- -->

<div class="highlight"><pre class="highlight plaintext"><code>Window -&gt;  Preferences -&gt;  Java -&gt;  Code Style -&gt;  Formatter -&gt; Import -&gt; &lt;ovirt-src-root&gt;/config/engine-code-format.xml&#x000A;</code></pre></div>
<ul>
  <li>The above formatter however, doesn't work with trailing whitespaces inside comments. To make sure that this is also taken care, add the following <strong>Save Action</strong> to the Java editor:</li>
</ul>

<!-- -->

<div class="highlight"><pre class="highlight plaintext"><code>Window -&gt;  Preferences -&gt;  Java -&gt;  Editor -&gt;  Save Actions -&gt; Additional Actions -&gt;  Configure -&gt;  Code Organizing -&gt;  Remove trailing whitespace -&gt; All lines &#x000A;</code></pre></div>
<ul>
  <li>By now, hopefully, you should have resolved all compilation errors shown by eclipse, and ready to start development of oVirt engine.</li>
</ul>

<!-- -->

<ul>
  <li>On some machines, editing a properties file in eclipse results in a lot of "diff" in git, making it difficult to review the code change. It may be a good idea to verify this in the beginning, and if the problem exists, edit the properties files using an external text editor.</li>
</ul>

<h4 id="troubleshooting">Troubleshooting</h4>

<ul>
  <li>Eclipse may get stuck on start-up while building worspace with no progress.</li>
</ul>

<p>Remove the following file:
 .metadata/.plugins/org.eclipse.core.resources/.snap
and restart eclipse.
If the above didn't help try also removing
 .metadata/.plugins/org.eclipse.core.resources/.snap . These files should be located under workspace.</p>

<h3 id="intellij">IntelliJ</h3>

<ul>
  <li>Install IntelliJ (there is a community edition)</li>
</ul>

<p><a href="http://www.jetbrains.com/idea/free_java_ide.html">http://www.jetbrains.com/idea/free_java_ide.html</a></p>

<ul>
  <li>Run IntelliJ (make sure you have set JAVA_HOME variable first)</li>
</ul>

<p>/yourIntelliJInstallLocation/bin/idea.sh</p>

<ul>
  <li>
    <p>In order to open the ovirt-engine project, do:</p>

    <p> File–&gt;Open Project</p>
  </li>
</ul>

<p>Select the main pom.xml located at the root of the ovirt-engine directory.
It should then open the project structure on the left pane (there is a package-based view as well similar to Eclipse. In order to switch to it, select in left upper corner of the left pane: "view as: Packages").
It also detects automatically the project is working with Git and its settings, and the right click menu adjusts to the Git integration.</p>

<ul>
  <li>Eclipse code formatter - in order to be aligned with code formatting along the project, it is advised to work with the code styling configuration file that is based on Eclipse.</li>
</ul>

<p>In order to use it in IntelliJ, please install the Eclipse Code Formatter plugin:</p>

<div class="highlight"><pre class="highlight plaintext"><code>   Settings --&gt; IDE settings --&gt; Plugins --&gt; Available, search for Eclipse Code Formatter and right click "Install".&#x000A;</code></pre></div>
<ul>
  <li>
    <p>After plugin installation, go to:</p>

    <p> Settings –&gt; Project Settings –&gt; Eclipse Code Formatter</p>
  </li>
</ul>

<ol>
  <li>Import the code styling xml that is part of the ovirt-engine project: ovirt-engine/config/engine-code-format.xml</li>
  <li>Make sure the Import order section is set on "Manual configuration" with the following order (that follows latest Eclipse defaults) : java;javax;org;com;</li>
  <li>Follow the "Optimize imports section" in the plugin's help page:</li>
</ol>

<p><a href="https://github.com/krasa/EclipseCodeFormatter#instructions">https://github.com/krasa/EclipseCodeFormatter#instructions</a></p>

<p>Example: <img alt="" width="1220" height="855" src="/images/wiki/IDEA-EclipseFormatter-Settings.png?1560777613" /></p>

<ul>
  <li>
    <p>In order to prevent collapsing explicit class imports to one liner (e.g. com.my.package.*), do the following:</p>

    <p> Settings -&gt; Code Style -&gt; Imports</p>
  </li>
</ul>

<p>Set "use single class import" as checked, and "class count" and "name count" settings to 99</p>

<ul>
  <li>If you want the code formatting to run when you save a file, a-la Eclipse, you can follow <a href="http://stackoverflow.com/questions/946993/intellij-reformat-on-file-save">these instructions</a>.</li>
</ul>

<!-- -->

<ul>
  <li>Maven configuration (not mandatory) - for easier development work (not need to use command line)</li>
</ul>

<p>First, make sure that IntelliJ is pointed at the correct Maven configuration, especially if you have several different versions.</p>

<div class="highlight"><pre class="highlight plaintext"><code>   Settings--&gt; Project Settings --&gt; Maven&#x000A;</code></pre></div>
<p>In order to benefit from the Maven integration and build the project from within IntelliJ , go to :</p>

<div class="highlight"><pre class="highlight plaintext"><code>   Run --&gt; Edit configurations --&gt; Add new configuration (select Maven)&#x000A;</code></pre></div>
<ol>
  <li>Give it a meaningful name (such as "build including UI")</li>
  <li>Fill the working directory (where the parent pom.xml is located)</li>
  <li>Fill goals (for example - clean install)</li>
  <li>Fill profiles if exist (for example - gwtdev, gwt-admin, dep)</li>
  <li>If you need to set any -D flags , it is available in the Runner tab</li>
</ol>

<p>Now you can always select this configuration from the combo box in the main pane, and press "run" (the green triangle) - it is equivalent to running "mvn clean install … " from the command line.</p>

<p>Please note you can create several different configurations (with UI, without user portal, etc.)</p>

<p>Configuration example: <img alt="" width="958" height="687" src="/images/wiki/Maven-Configurations.png?1560777613" /></p>

<h3 id="others">Others</h3>

<ul>
  <li>Same as Net Beans…</li>
  <li><a href="/develop/developer-guide/java/backend-with-jrebel/">Backend with jrebel</a></li>
</ul>

<h3 id="troubleshooting-1">Troubleshooting</h3>

<ul>
  <li>The following problem was encountered in eclipse, but is probably not confined to a specific IDE:</li>
</ul>

<p>After build - Maven problem, invalid LOC header (bad signature).
The fix:</p>

<div class="highlight"><pre class="highlight plaintext"><code>delete repository&#x000A;#&gt; rm -rf ~/.m2/repository/*&#x000A;&#x000A;use maven&#x000A;#&gt; mvn test&#x000A;</code></pre></div>
<p>Some explanation:
The cause of the problem is a corrupt jar in the maven repository, and the above removes all jars and re-downloads them when using maven.
For more details read <a href="http://tech.deepumohan.com/2012/07/maven-invalid-cen-bad-signature-invalid.html">here</a>.</p>

</section>
</section>
</section>
<footer class='text-center' id='footer'>
<hr class='visible-print'>
<ul class='footer-nav-list'>
<li><a target="_blank" href="../../../../site/privacy-policy.html">Privacy policy</a></li>
<li><a target="_blank" href="../../../../community/about.html">About</a></li>
<li><a target="_blank" href="../../../../site/general-disclaimer.html">Disclaimers</a></li>
</ul>

&copy; 2013&ndash;2019 oVirt
<div class='edit-this-page'>
<a target="_blank" href="https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/source/develop/developer-guide/engine/building/ide.html.md&amp;template="><i class="icon fa fa-github"></i>Report an issue with this page</a>
</div>
<div class='edit-this-page'>
<a target="_blank" href="https://github.com/oVirt/ovirt-site/edit/master/source/develop/developer-guide/engine/building/ide.html.md"><i class="icon fa fa-github"></i>Edit this page</a>
</div>
<div class='last-modified'>
Page last modified
Wed 12 Jul 2017 17:57 UTC
</div>
        <script type="text/javascript">
        var _paq = _paq || [];
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://stats.phx.ovirt.org/";
        _paq.push(['setTrackerUrl', u+'piwik.php']);
        _paq.push(['setSiteId', 1]);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
        g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
        </script>
<noscript><p><img src="https://stats.phx.ovirt.org/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
</footer>


<script src="/javascripts/application.js?1560777657" type="text/javascript"></script>

</body>
</html>
