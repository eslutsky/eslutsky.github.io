<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8 lt-ie7" lang="en-us"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8" lang="en-us"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie10 lt-ie9" lang="en-us"> <![endif]-->
<!--[if IE 9]> <html class="no-js lt-ie10 lt-ie9" lang="en-us"> <![endif]-->
<!--[if lt IE 10]> <html class="no-js lt-ie10" lang="en-us"> <![endif]-->
<!--[if !IE]> > <![endif]-->
<html class='no-js' lang='en'>
<!-- <![endif] -->
<head>
<title>
CockpitOvirtPlugin &mdash;
oVirt
</title>
<meta charset='utf-8'>
<meta content='' name='description'>
<meta content='' name='author'>
<meta content='initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width' name='viewport'>

<link href='/images/favicon.ico' rel='shortcut icon'>
<link href='/images/apple-touch-icon-precomposed.png' rel='apple-touch-icon-precomposed'>
<link href='/images/apple-touch-icon-57x57-precomposed.png' rel='apple-touch-icon-precomposed' sizes='57x57'>
<link href='/images/apple-touch-icon-72x72-precomposed.png' rel='apple-touch-icon-precomposed' sizes='72x72'>
<link href='/images/apple-touch-icon-114x114-precomposed.png' rel='apple-touch-icon-precomposed' sizes='114x114'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>
<link href="/stylesheets/application.css?1560777611" rel="stylesheet" type="text/css" />
<link href="/stylesheets/print.css?1560777612" rel="stylesheet" type="text/css" media="print" />
</head>
<body class=' source-md'>
<header class='masthead hidden-print' id='branding' role='banner'>
<section class='hgroup'></section>
<div id='access'>
<nav id="mainNav" class="navbar-fixed-top affix-top navForMobileHack" style="font-family: 'Open Sans', sans-serif; display: flex; justify-content: center;">
      <a href="/"><img id="logo" style="float: left; margin-right: 70px; height: 40px; padding: 0; margin-top: 12px;" alt="oVirt" src="/images/logo.svg"></a>
      <div>
          <div class="navbar-header page-scroll" style="min-width: 170px">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu_id0980fddf">
                  <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
              </button>
          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="menu_id0980fddf">

              <ul class="nav navbar-nav">
                  <li class="hidden active">
                      <a href="#page-top"></a>
                  </li>
<li role='menuitem'>
  <a href='/'>Home</a>
</li>

<li role='menuitem'>
  <a href='/download/'>Download</a>
</li>

<li role='menuitem'>
  <a href='/documentation/'>Documentation</a>
</li>

<li role='menuitem'>
  <a href='/develop/'>Developers</a>
</li>

<li role='menuitem'>
  <a href='/community/'>Community</a>
</li>

<li role='menuitem'>
  <a href='//lists.ovirt.org/archives/'>Forum</a>
</li>

<li role='menuitem'>
  <a href='/blog/'>Blog</a>
</li>

              </ul>
          </div>
          <!-- /.navbar-collapse -->
      </div>
      <!-- /.container-fluid -->
  </nav>

</div>
</header>

<section class='page-wrap' id='page-wrap'>
<section class='page' id='page'>
<ul class='breadcrumb'>
<li><a href="/develop/">Develop</a></li>
<li><a href="/develop/release-management/">Release-management</a></li>
<li><a href="/develop/release-management/features/">Features</a></li>
<li><a href="/develop/release-management/features/integration/">Integration</a></li>
</ul>

<section class='container content' id='content'>
<div class='alert alert-warning'>
Feature pages are design documents that developers have created while collaborating on oVirt.
<br>
<br>
Most of them are
<strong>
outdated
</strong>
, but provide historical design context.
<br>
<br>
They are
<strong>
not
</strong>
user documentation and should not be treated as such.
<br>
<br>
<a href='/documentation/'>Documentation is available here.</a>
</div>
<h1 id="proposed-feature-40-cockpit-ovirt-plugin">Proposed Feature 4.0: Cockpit-oVirt Plugin</h1>

<h2 id="summary">Summary</h2>
<p>The oVirt's webadmin provides complete datacenter/cluster view and it's administration but lacks in tuning of specific hosts parameters.
Recent oVirt's UI can be considered as comprehensive but heavy-weight, confusing for non-advanced users, resource-consuming and it's accessibility can be limited in case of high-loaded engine.</p>

<p>This feature introduces new plugin to Cockpit which provides VM-centric monitoring and management of a host machine while taking advantage of already built-in admin functionality in the Cockpit.</p>

<h3 id="about-cockpit">About Cockpit</h3>
<p>Cockpit is a Linux system administration tool with fancy web UI, easy setup and minimal system footprint at runtime.
Cockpit's functionality can be extended by plugins represented by html page(s), javascript, manifest file and optionally backend components.
Cockpit's access to the host is restricted to the same privileges as shell of a logged user, i.e. via ssh.</p>

<h3 id="owner">Owner</h3>
<ul>
  <li>Name: Marek Libra</li>
  <li>Email: mlibra@redhat.com</li>
</ul>

<h3 id="benefit-to-ovirt">Benefit to oVirt</h3>
<p>User experience in using Cockpit can be described with words like 'light-weight', 'targeted on action', 'user-friendly' or 'easy-to-use'.</p>

<p>The oVirt plugin represents VM-centric monitoring and troubleshooting tool of a host with easy setup.
It's use is complimentary to the recent oVirt UIs, allowing user to easily switch among them depending on his/her actual needs.</p>

<p>Brings benefits in:</p>

<ul>
  <li>fine grained host tuning</li>
  <li>troubleshooting tool when heavy-weight UIs can't be effectively accessed</li>
  <li>oVirt's integration point on UI level since whole plugin or it's parts are easily embeddable within other web applications (i.e. ManageIQ or even oVirt Webadmin)</li>
  <li>starting point for management of a small cluster setup, while deploying VDSM and so making foundation to full oVirt setup in the future when demands grows</li>
</ul>

<h3 id="dependencies">Dependencies</h3>
<p>Cockpit needs to be installed and running.</p>

<p>The plugin has dependency on the</p>

<ul>
  <li>Cockpit - needs to be installed and running</li>
  <li>VDSM running on the host.</li>
</ul>

<p>Access to oVirt's engine is optional. When login is available, additional functionality is accessible in the plugin.</p>

<h3 id="rules-of-thumb">Rules of Thumb</h3>
<p>If functionality provided by the plugin is in contrary to the oVirt's engine, it is either not provided or achieved via engine's REST API call.
Despite the logged user might have access to the libvirt/VDSM on the host, the plugin shall not attempt to replace oVirt's engine.
The plugin is meant to allow access to engine/vdsm functionality in a user-friendly way, but not actualy implement it.</p>

<p>While respecting previous rule and if possible, the VDSM is  preferred to perform host-local actions over direct calls to other components/libraries (i.e. libvirt).</p>

<p>The plugin is not meant as full replacement of UI. Just selected functionality should be provided to keep user-friendliness on mind.</p>

<h3 id="recent-status">Recent Status</h3>
<p>Please see issue tracker [2] for more details about recent issues and planed enhancements.</p>

<p>Initial implementation is on github.</p>

<h3 id="action-items">Action Items</h3>
<p>Initial implementation with basic functionality is recently on github [1].</p>

<p>High priority ongoing enhancements:</p>

<ul>
  <li>SSO (for both engine and cockpit)</li>
  <li>patternfly</li>
  <li>rpm packaging and oVirt's repository</li>
  <li>event-driven internal data update</li>
  <li>embedding in webadmin</li>
</ul>

<p>More details and list of next planed enhancements can be found in the issue tracker, see [2]</p>

<h2 id="detailed-description">Detailed Description</h2>
<p><img alt="" width="1918" height="815" src="/images/wiki/cockpit_vmsList.png?1560777612" /> 
<img alt="" width="1918" height="372" src="/images/wiki/cockpit_vmDetail.png?1560777612" /> 
<img alt="" width="1918" height="594" src="/images/wiki/cockpit_vdsmConfig.png?1560777612" /></p>

<h3 id="basic">Basic</h3>

<ul>
  <li>List VMs running on the host</li>
  <li>VM details with usage charts/statistics</li>
  <li>Shutdown/Force off the VM</li>
  <li>get Console</li>
  <li>edit vdsm.conf</li>
  <li>vdsmd.service management (hyperlink)</li>
</ul>

<h3 id="with-access-to-ovirts-engine">With access to oVirt's engine</h3>
<ul>
  <li>cluster VMs list with details</li>
  <li>click-through to remote cockpit-ovirt plugin to see VM Detail</li>
  <li>run VM</li>
  <li>engine login SSO</li>
</ul>

<h3 id="general">General</h3>
<ul>
  <li>look&amp;feel supported by patternfly if not in contrary to other parts of Cockpit (recently not 100% achieved)</li>
  <li>packaged as RPM (.deb is not decided yet)</li>
  <li>access to the sub-screens (user components) via URL hashes:
    <pre>https://HOST:PORT/ovirt/ovirt#/[component]/[state]</pre>
  </li>
</ul>

<h2 id="implementation">Implementation</h2>
<p>The plugin is composed of</p>

<ul>
  <li>single HTML page (ovirt.html)
    <ul>
      <li>defines plugin's layout</li>
    </ul>
  </li>
  <li>JavaScripts (*.js)
    <ul>
      <li>implements majority of plugin's functionality</li>
      <li>as stated in the Rules of Thumb section, no importnant business logic is implemented on plugin's side</li>
      <li>keeps user-session state</li>
      <li>requirements on 3rd party libraries are kept at minimum</li>
      <li>spawns the vdsmJsonRPCCli.py to get data or invoke actions on VDSM or Engine</li>
      <li>handles navigation in-/out-side of the plugin</li>
      <li>sensitive information (like engine's token) are stored in the Window.sessionStorage</li>
    </ul>
  </li>
  <li>backend (vdsmJsonRPCCli.py)
    <ul>
      <li>runs on the host under cockpit's logged user privileges</li>
      <li>connects to VDSM via JSON RPC (utilizes jsonrpcvdscli.py)</li>
      <li>stateless</li>
      <li>bridges connection to the Engine
        <ul>
          <li>has access to engine's SSL certificate</li>
          <li>browser does not require access to the engine</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Cockpit namely provides:
    <ul>
      <li>authentication</li>
      <li>basic libraries (jquery, mustache)</li>
      <li>CSS (reused as much as possible)</li>
      <li>management and monitoring of the host and related services (networking, storage, system services, etc)</li>
    </ul>
  </li>
</ul>

<h3 id="installationupgrade">Installation/Upgrade</h3>
<p>Refer the plugin's README file for install instructions.</p>

<h2 id="external-links">External links</h2>
<ul>
  <li><a href="https://github.com/mareklibra/cockpit-ovirt">The plugin on github</a></li>
  <li><a href="https://github.com/mareklibra/cockpit-ovirt/issues">The Issue Tracker</a></li>
  <li><a href="https://github.com/mareklibra/cockpit-ovirt/blob/master/README.md">The Plugin's README.md</a></li>
  <li><a href="http://cockpit-project.org/">The Cockpit project</a></li>
</ul>


</section>
</section>
</section>
<footer class='text-center' id='footer'>
<hr class='visible-print'>
<ul class='footer-nav-list'>
<li><a target="_blank" href="../../../../site/privacy-policy.html">Privacy policy</a></li>
<li><a target="_blank" href="../../../../community/about.html">About</a></li>
<li><a target="_blank" href="../../../../site/general-disclaimer.html">Disclaimers</a></li>
</ul>

&copy; 2013&ndash;2019 oVirt
<div class='edit-this-page'>
<a target="_blank" href="https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/source/develop/release-management/features/integration/cockpit.html.md&amp;template="><i class="icon fa fa-github"></i>Report an issue with this page</a>
</div>
<div class='edit-this-page'>
<a target="_blank" href="https://github.com/oVirt/ovirt-site/edit/master/source/develop/release-management/features/integration/cockpit.html.md"><i class="icon fa fa-github"></i>Edit this page</a>
</div>
<div class='last-modified'>
Page last modified
Sun 13 Aug 2017 15:05 UTC
</div>
        <script type="text/javascript">
        var _paq = _paq || [];
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://stats.phx.ovirt.org/";
        _paq.push(['setTrackerUrl', u+'piwik.php']);
        _paq.push(['setSiteId', 1]);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
        g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
        </script>
<noscript><p><img src="https://stats.phx.ovirt.org/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
</footer>


<script src="/javascripts/application.js?1560777657" type="text/javascript"></script>

</body>
</html>
