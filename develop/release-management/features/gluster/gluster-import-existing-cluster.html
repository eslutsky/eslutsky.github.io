<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8 lt-ie7" lang="en-us"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8" lang="en-us"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie10 lt-ie9" lang="en-us"> <![endif]-->
<!--[if IE 9]> <html class="no-js lt-ie10 lt-ie9" lang="en-us"> <![endif]-->
<!--[if lt IE 10]> <html class="no-js lt-ie10" lang="en-us"> <![endif]-->
<!--[if !IE]> > <![endif]-->
<html class='no-js' lang='en'>
<!-- <![endif] -->
<head>
<title>
Gluster Import Existing Cluster &mdash;
oVirt
</title>
<meta charset='utf-8'>
<meta content='' name='description'>
<meta content='' name='author'>
<meta content='initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width' name='viewport'>

<link href='/images/favicon.ico' rel='shortcut icon'>
<link href='/images/apple-touch-icon-precomposed.png' rel='apple-touch-icon-precomposed'>
<link href='/images/apple-touch-icon-57x57-precomposed.png' rel='apple-touch-icon-precomposed' sizes='57x57'>
<link href='/images/apple-touch-icon-72x72-precomposed.png' rel='apple-touch-icon-precomposed' sizes='72x72'>
<link href='/images/apple-touch-icon-114x114-precomposed.png' rel='apple-touch-icon-precomposed' sizes='114x114'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>
<link href="/stylesheets/application.css?1560777611" rel="stylesheet" type="text/css" />
<link href="/stylesheets/print.css?1560777612" rel="stylesheet" type="text/css" media="print" />
</head>
<body class=' source-md'>
<header class='masthead hidden-print' id='branding' role='banner'>
<section class='hgroup'></section>
<div id='access'>
<nav id="mainNav" class="navbar-fixed-top affix-top navForMobileHack" style="font-family: 'Open Sans', sans-serif; display: flex; justify-content: center;">
      <a href="/"><img id="logo" style="float: left; margin-right: 70px; height: 40px; padding: 0; margin-top: 12px;" alt="oVirt" src="/images/logo.svg"></a>
      <div>
          <div class="navbar-header page-scroll" style="min-width: 170px">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu_id0980fddf">
                  <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
              </button>
          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="menu_id0980fddf">

              <ul class="nav navbar-nav">
                  <li class="hidden active">
                      <a href="#page-top"></a>
                  </li>
<li role='menuitem'>
  <a href='/'>Home</a>
</li>

<li role='menuitem'>
  <a href='/download/'>Download</a>
</li>

<li role='menuitem'>
  <a href='/documentation/'>Documentation</a>
</li>

<li role='menuitem'>
  <a href='/develop/'>Developers</a>
</li>

<li role='menuitem'>
  <a href='/community/'>Community</a>
</li>

<li role='menuitem'>
  <a href='//lists.ovirt.org/archives/'>Forum</a>
</li>

<li role='menuitem'>
  <a href='/blog/'>Blog</a>
</li>

              </ul>
          </div>
          <!-- /.navbar-collapse -->
      </div>
      <!-- /.container-fluid -->
  </nav>

</div>
</header>

<section class='page-wrap' id='page-wrap'>
<section class='page' id='page'>
<ul class='breadcrumb'>
<li><a href="/develop/">Develop</a></li>
<li><a href="/develop/release-management/">Release-management</a></li>
<li><a href="/develop/release-management/features/">Features</a></li>
<li><a href="/develop/release-management/features/gluster/">Gluster</a></li>
</ul>

<section class='container content' id='content'>
<div class='alert alert-warning'>
Feature pages are design documents that developers have created while collaborating on oVirt.
<br>
<br>
Most of them are
<strong>
outdated
</strong>
, but provide historical design context.
<br>
<br>
They are
<strong>
not
</strong>
user documentation and should not be treated as such.
<br>
<br>
<a href='/documentation/'>Documentation is available here.</a>
</div>
<h1 id="gluster-import-existing-cluster">Gluster Import Existing Cluster</h1>

<h2 id="summary">Summary</h2>

<p>This allows the user to import an existing gluster supported cluster to engine. All the hosts part of the cluster will be imported.</p>

<h2 id="owner">Owner</h2>

<ul>
  <li>Feature owner: Shireesh Anjal <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#115;&#097;&#110;&#106;&#097;&#108;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;">&#115;&#097;&#110;&#106;&#097;&#108;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;</a>
    <ul>
      <li>GUI Component owner: Kanagaraj Mayilsamy <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#107;&#109;&#097;&#121;&#105;&#108;&#115;&#097;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;">&#107;&#109;&#097;&#121;&#105;&#108;&#115;&#097;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;</a></li>
      <li>REST Component owner: Shireesh Anjal</li>
      <li>Engine Component owner: Dhandapani Gopal <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#100;&#103;&#111;&#112;&#097;&#108;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;">&#100;&#103;&#111;&#112;&#097;&#108;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;</a></li>
      <li>QA Owner: Sudhir Dharanendraiah <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#115;&#100;&#104;&#097;&#114;&#097;&#110;&#101;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;">&#115;&#100;&#104;&#097;&#114;&#097;&#110;&#101;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;</a></li>
    </ul>
  </li>
</ul>

<h2 id="current-status">Current Status</h2>

<ul>
  <li>Status: Complete</li>
  <li>Last updated date: Fri Sep 25 2012</li>
</ul>

<h2 id="detailed-description">Detailed Description</h2>

<p>This feature provides the support for importing a storage cluster (gluster enabled) to oVirt engine. The hosts in the cluster will not have vdsm installed. The user needs to provide the details of any host in the cluster which includes IP/Host name of the host and password. "gluster peer status" command will be executed on that host through ssh, the result of the command will provide the list of hosts part of the cluster. Once everything is successful, the list of hosts will be shown to the user. The user verifies(manually) the fingerprint of each and every host and provides passwords for them, the AddHost flow continues from here onwards.</p>

<h2 id="design">Design</h2>

<h3 id="fetching-gluster-hosts">Fetching Gluster Hosts</h3>

<p><img alt="" width="604" height="536" src="/images/wiki/Gluster-Import-Cluster-1.png?1560777613" /></p>

<p>The <strong>Import existing cluster configuration</strong> section will be shown only if the user select <strong>Enable Gluster Service</strong>. When the user types the host <strong>Address</strong> and tab out or click outside, the fingerprint will be fetched and shown to the user. If the engine is not able to fetch the fingerprint either because of host is down or network issue, an error <strong>Error in fetching fingerprint</strong> will be shown in the fingerprint field. If the fingerprint is correct(to make sure we are communicating with the actual host not with some one else), the user will enter the password for the host and click <strong>Ok</strong>. The "gluster peer status" command will be executed through ssh in the remote host. This command will fail if the gluster is not running on the host or password is incorrect. The appropriate error message will be shown in the same place. The user will not be allowed to import even if one of the hosts in the cluster is down or not reachable. If everything is successful, the user will be shown the <strong>Add Hosts</strong> dialog which lists the hosts part of the cluster.</p>

<h3 id="importing-gluster-hosts">Importing Gluster Hosts</h3>

<p><img alt="" width="909" height="456" src="/images/wiki/Gluster-Import-Cluster-2.png?1560777613" /></p>

<p>The list of hosts which are part of the cluster will be shown. The <strong>Name</strong> column for each host will have the same values as the <strong>Hostname/IP</strong> column, the user can change the name of the host. The user needs to enter the <strong>Password</strong> for all the hosts shown in the table. If the passwords for all the hosts are same, the user can select <strong>Use a common password</strong>, enter the <strong>Root Password</strong> and click on <strong>Apply</strong>. The same password will be assigned for all the hosts. The user needs to verify the <strong>Fingerprint</strong> of all the hosts before submitting the details. If the passwords provided for the hosts are correct, the hosts will be added to the engine and available under the <strong>Hosts</strong> tab. The normal <strong>Add Host</strong> flow of bootstrapping, restart,etc continues from here onwards. As the newly imported hosts will not have <strong>vdsm</strong> installed, the bootstrap script will install all the necessary vdsm packages on the hosts.</p>

<h2 id="user-work-flow">User Work flow</h2>

<ol>
  <li>Click on <strong>New</strong> in Cluster Main Tab, the Create Cluster dialog opens</li>
  <li>Select <strong>Enable Gluster Service</strong> and <strong>Import existing gluster configuration</strong> checkboxes.</li>
  <li>Enter the IP Address/Host name of any server in the cluster</li>
  <li>Wait for the <strong>Fingerprint</strong> to load, and make sure we are communicating with the correct host</li>
  <li>Provide the <strong>Root Password</strong> for the server, and Click <strong>Ok</strong></li>
  <li><em>gluster peer status</em> command will be executed on that server</li>
  <li><strong>Add Hosts</strong> dialog will be shown with the list of hosts in the cluster</li>
  <li>Edit the <strong>Name</strong> of the hosts if required and provide <strong>Root Passwords</strong>. Same password can be provided for the all the hosts by selecting <strong>Use a common password</strong>. Click on <strong>Apply</strong> to set the entered password all hosts. The user can provide a different password for one host by editing the <strong>Root Password</strong> field of the respective host.</li>
  <li>Make sure the fingerprints are valid and submit the details by clicking <strong>Ok</strong></li>
</ol>

<p>None of the hosts will be imported even if the password for a host is wrong or one of the host is not reachable.</p>


</section>
</section>
</section>
<footer class='text-center' id='footer'>
<hr class='visible-print'>
<ul class='footer-nav-list'>
<li><a target="_blank" href="../../../../site/privacy-policy.html">Privacy policy</a></li>
<li><a target="_blank" href="../../../../community/about.html">About</a></li>
<li><a target="_blank" href="../../../../site/general-disclaimer.html">Disclaimers</a></li>
</ul>

&copy; 2013&ndash;2019 oVirt
<div class='edit-this-page'>
<a target="_blank" href="https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/source/develop/release-management/features/gluster/gluster-import-existing-cluster.html.md&amp;template="><i class="icon fa fa-github"></i>Report an issue with this page</a>
</div>
<div class='edit-this-page'>
<a target="_blank" href="https://github.com/oVirt/ovirt-site/edit/master/source/develop/release-management/features/gluster/gluster-import-existing-cluster.html.md"><i class="icon fa fa-github"></i>Edit this page</a>
</div>
<div class='last-modified'>
Page last modified
Wed 12 Jul 2017 17:57 UTC
</div>
        <script type="text/javascript">
        var _paq = _paq || [];
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://stats.phx.ovirt.org/";
        _paq.push(['setTrackerUrl', u+'piwik.php']);
        _paq.push(['setSiteId', 1]);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
        g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
        </script>
<noscript><p><img src="https://stats.phx.ovirt.org/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
</footer>


<script src="/javascripts/application.js?1560777657" type="text/javascript"></script>

</body>
</html>
