<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8 lt-ie7" lang="en-us"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8" lang="en-us"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie10 lt-ie9" lang="en-us"> <![endif]-->
<!--[if IE 9]> <html class="no-js lt-ie10 lt-ie9" lang="en-us"> <![endif]-->
<!--[if lt IE 10]> <html class="no-js lt-ie10" lang="en-us"> <![endif]-->
<!--[if !IE]> > <![endif]-->
<html class='no-js' lang='en'>
<!-- <![endif] -->
<head>
<title>
Display Address Override &mdash;
oVirt
</title>
<meta charset='utf-8'>
<meta content='' name='description'>
<meta content='' name='author'>
<meta content='initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width' name='viewport'>

<link href='/images/favicon.ico' rel='shortcut icon'>
<link href='/images/apple-touch-icon-precomposed.png' rel='apple-touch-icon-precomposed'>
<link href='/images/apple-touch-icon-57x57-precomposed.png' rel='apple-touch-icon-precomposed' sizes='57x57'>
<link href='/images/apple-touch-icon-72x72-precomposed.png' rel='apple-touch-icon-precomposed' sizes='72x72'>
<link href='/images/apple-touch-icon-114x114-precomposed.png' rel='apple-touch-icon-precomposed' sizes='114x114'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>
<link href="/stylesheets/application.css?1560777611" rel="stylesheet" type="text/css" />
<link href="/stylesheets/print.css?1560777612" rel="stylesheet" type="text/css" media="print" />
</head>
<body class=' source-md'>
<header class='masthead hidden-print' id='branding' role='banner'>
<section class='hgroup'></section>
<div id='access'>
<nav id="mainNav" class="navbar-fixed-top affix-top navForMobileHack" style="font-family: 'Open Sans', sans-serif; display: flex; justify-content: center;">
      <a href="/"><img id="logo" style="float: left; margin-right: 70px; height: 40px; padding: 0; margin-top: 12px;" alt="oVirt" src="/images/logo.svg"></a>
      <div>
          <div class="navbar-header page-scroll" style="min-width: 170px">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu_id0980fddf">
                  <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
              </button>
          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="menu_id0980fddf">

              <ul class="nav navbar-nav">
                  <li class="hidden active">
                      <a href="#page-top"></a>
                  </li>
<li role='menuitem'>
  <a href='/'>Home</a>
</li>

<li role='menuitem'>
  <a href='/download/'>Download</a>
</li>

<li role='menuitem'>
  <a href='/documentation/'>Documentation</a>
</li>

<li role='menuitem'>
  <a href='/develop/'>Developers</a>
</li>

<li role='menuitem'>
  <a href='/community/'>Community</a>
</li>

<li role='menuitem'>
  <a href='//lists.ovirt.org/archives/'>Forum</a>
</li>

<li role='menuitem'>
  <a href='/blog/'>Blog</a>
</li>

              </ul>
          </div>
          <!-- /.navbar-collapse -->
      </div>
      <!-- /.container-fluid -->
  </nav>

</div>
</header>

<section class='page-wrap' id='page-wrap'>
<section class='page' id='page'>
<ul class='breadcrumb'>
<li><a href="/develop/">Develop</a></li>
<li><a href="/develop/release-management/">Release-management</a></li>
<li><a href="/develop/release-management/features/">Features</a></li>
<li><a href="/develop/release-management/features/virt/">Virt</a></li>
</ul>

<section class='container content' id='content'>
<div class='alert alert-warning'>
Feature pages are design documents that developers have created while collaborating on oVirt.
<br>
<br>
Most of them are
<strong>
outdated
</strong>
, but provide historical design context.
<br>
<br>
They are
<strong>
not
</strong>
user documentation and should not be treated as such.
<br>
<br>
<a href='/documentation/'>Documentation is available here.</a>
</div>
<h1 id="display-address-override">Display Address Override</h1>

<h2 id="summary">Summary</h2>

<ul>
  <li>Support overriding of the display address per host</li>
  <li>Add warnings to Web Admin to make the administrator aware if some hosts has the display address overridden and some not</li>
</ul>

<h2 id="owner">Owner</h2>

<ul>
  <li>Name: Tomas Jelinek (TJelinek)</li>
  <li>Email: <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#116;&#106;&#101;&#108;&#105;&#110;&#101;&#107;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;">&#116;&#106;&#101;&#108;&#105;&#110;&#101;&#107;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;</a></li>
</ul>

<h2 id="current-status">Current status</h2>

<p>development</p>

<h2 id="detailed-description">Detailed Description</h2>

<p>Support the following scenario:</p>

<ul>
  <li>The hosts are defined by internal IP and sitting behind a NAT firewall</li>
  <li>When the user connects to the guest from User Portal from outside of the internal network, instead of returning the private address of the host on which the guest is running, a public IP or FQDN (which will be resolved in the external network to the public IP) will be returned</li>
  <li>The firewall NATs the IP to the proper internal IP</li>
</ul>

<h3 id="webadmin">Webadmin</h3>

<h4 id="configuration-part">Configuration part</h4>

<ul>
  <li>The new/edit host dialog will have a new side tab named "Console"</li>
  <li>This side tab will contain a checkbox with label "Override display address"</li>
  <li>Next to this checkbox a context sensitive help icon will be present with text: "Overrides the display address of all VMs on this host by the specified address."</li>
  <li>Under this checkbox a text box with label "Display address" will be present which will be enabled only when the checkbox is checked</li>
  <li>There will be a "hostname or IP" validation attached to this textbox (both on frontend and backend)</li>
</ul>

<h4 id="usage-part">Usage part</h4>

<p>When connecting to the console from WebAdmin or UserPortal, the display address will be the one configured in the Hosts dialog. If it is not configured, the address will be the address of the host.</p>

<h4 id="monitoring-part">Monitoring part</h4>

<p>To help the administrator to avoid the situation that some hosts in the cluster have the display address overridden and some not, the following will be done in Web Admin:</p>

<ul>
  <li>In General subtab of the Cluster main tab a warning will be shown (the same format as in the General subtab of the Hosts main tab when the power management is not configured)</li>
  <li>The warning message will be the following: "Some hosts in this cluster have the console address overridden and some not. For details please see the Hosts subtab"</li>
  <li>The Hosts subtab of the Cluster main tab contains a table with list of hosts. This table will be enriched by a new column named "Display Address Overridden" which will contain "Yes" if the display address for this host has been overridden, else will contain "No"</li>
</ul>

<h3 id="rest-api">REST API</h3>

<ul>
  <li>the <em>host</em> now contains a "display" property which contains the <em>address</em>.</li>
  <li>if not set, the console address will not be overridden</li>
  <li>if set, the console address will be overridden by the specified address</li>
</ul>

<p>Example of creating a host with display address overridden:</p>

<div class="highlight"><pre class="highlight plaintext"><code>  &lt;host&gt;&#x000A;      &lt;name&gt;hostX&lt;/name&gt;&#x000A;      &lt;address&gt;som.address&lt;/address&gt;&#x000A;      &lt;root_password&gt;somePassword&lt;/root_password&gt;&#x000A;     &lt;display&gt;&#x000A;         &lt;address&gt;someDisplayAddress&lt;/address&gt;&#x000A;     &lt;/display&gt;&#x000A;  &lt;/host&gt;&#x000A;   &#x000A;</code></pre></div>
<p>If the display address has been overridden, the example of how to switch it back to the default:</p>

<div class="highlight"><pre class="highlight plaintext"><code>   &#x000A;  &lt;host&gt;&#x000A;  &lt;display&gt;&#x000A;  &lt;address/&gt;&#x000A;  &lt;/display&gt;&#x000A;  &lt;/host&gt;&#x000A;   &#x000A;</code></pre></div>
<h2 id="documentation--external-references">Documentation / External references</h2>

<h2 id="known-issues">Known issues</h2>

<ul>
  <li>Live migration does not keep the spice console opened. To support live migration with opened spice console the <a href="https://bugzilla.redhat.com/show_bug.cgi?id=883936">https://bugzilla.redhat.com/show_bug.cgi?id=883936</a> has to be fixed.</li>
</ul>


</section>
</section>
</section>
<footer class='text-center' id='footer'>
<hr class='visible-print'>
<ul class='footer-nav-list'>
<li><a target="_blank" href="../../../../site/privacy-policy.html">Privacy policy</a></li>
<li><a target="_blank" href="../../../../community/about.html">About</a></li>
<li><a target="_blank" href="../../../../site/general-disclaimer.html">Disclaimers</a></li>
</ul>

&copy; 2013&ndash;2019 oVirt
<div class='edit-this-page'>
<a target="_blank" href="https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/source/develop/release-management/features/virt/display-address-override.html.md&amp;template="><i class="icon fa fa-github"></i>Report an issue with this page</a>
</div>
<div class='edit-this-page'>
<a target="_blank" href="https://github.com/oVirt/ovirt-site/edit/master/source/develop/release-management/features/virt/display-address-override.html.md"><i class="icon fa fa-github"></i>Edit this page</a>
</div>
<div class='last-modified'>
Page last modified
Wed 12 Jul 2017 17:57 UTC
</div>
        <script type="text/javascript">
        var _paq = _paq || [];
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://stats.phx.ovirt.org/";
        _paq.push(['setTrackerUrl', u+'piwik.php']);
        _paq.push(['setSiteId', 1]);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
        g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
        </script>
<noscript><p><img src="https://stats.phx.ovirt.org/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
</footer>


<script src="/javascripts/application.js?1560777657" type="text/javascript"></script>

</body>
</html>
