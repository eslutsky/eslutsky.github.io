<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8 lt-ie7" lang="en-us"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8" lang="en-us"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie10 lt-ie9" lang="en-us"> <![endif]-->
<!--[if IE 9]> <html class="no-js lt-ie10 lt-ie9" lang="en-us"> <![endif]-->
<!--[if lt IE 10]> <html class="no-js lt-ie10" lang="en-us"> <![endif]-->
<!--[if !IE]> > <![endif]-->
<html class='no-js' lang='en'>
<!-- <![endif] -->
<head>
<title>
HostHardwareInfo &mdash;
oVirt
</title>
<meta charset='utf-8'>
<meta content='' name='description'>
<meta content='' name='author'>
<meta content='initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width' name='viewport'>

<link href='/images/favicon.ico' rel='shortcut icon'>
<link href='/images/apple-touch-icon-precomposed.png' rel='apple-touch-icon-precomposed'>
<link href='/images/apple-touch-icon-57x57-precomposed.png' rel='apple-touch-icon-precomposed' sizes='57x57'>
<link href='/images/apple-touch-icon-72x72-precomposed.png' rel='apple-touch-icon-precomposed' sizes='72x72'>
<link href='/images/apple-touch-icon-114x114-precomposed.png' rel='apple-touch-icon-precomposed' sizes='114x114'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>
<link href="/stylesheets/application.css?1560777611" rel="stylesheet" type="text/css" />
<link href="/stylesheets/print.css?1560777612" rel="stylesheet" type="text/css" media="print" />
</head>
<body class=' source-md'>
<header class='masthead hidden-print' id='branding' role='banner'>
<section class='hgroup'></section>
<div id='access'>
<nav id="mainNav" class="navbar-fixed-top affix-top navForMobileHack" style="font-family: 'Open Sans', sans-serif; display: flex; justify-content: center;">
      <a href="/"><img id="logo" style="float: left; margin-right: 70px; height: 40px; padding: 0; margin-top: 12px;" alt="oVirt" src="/images/logo.svg"></a>
      <div>
          <div class="navbar-header page-scroll" style="min-width: 170px">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu_id0980fddf">
                  <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
              </button>
          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="menu_id0980fddf">

              <ul class="nav navbar-nav">
                  <li class="hidden active">
                      <a href="#page-top"></a>
                  </li>
<li role='menuitem'>
  <a href='/'>Home</a>
</li>

<li role='menuitem'>
  <a href='/download/'>Download</a>
</li>

<li role='menuitem'>
  <a href='/documentation/'>Documentation</a>
</li>

<li role='menuitem'>
  <a href='/develop/'>Developers</a>
</li>

<li role='menuitem'>
  <a href='/community/'>Community</a>
</li>

<li role='menuitem'>
  <a href='//lists.ovirt.org/archives/'>Forum</a>
</li>

<li role='menuitem'>
  <a href='/blog/'>Blog</a>
</li>

              </ul>
          </div>
          <!-- /.navbar-collapse -->
      </div>
      <!-- /.container-fluid -->
  </nav>

</div>
</header>

<section class='page-wrap' id='page-wrap'>
<section class='page' id='page'>
<ul class='breadcrumb'>
<li><a href="/develop/">Develop</a></li>
<li><a href="/develop/release-management/">Release-management</a></li>
<li><a href="/develop/release-management/features/">Features</a></li>
<li><a href="/develop/release-management/features/infra/">Infra</a></li>
</ul>

<section class='container content' id='content'>
<div class='alert alert-warning'>
Feature pages are design documents that developers have created while collaborating on oVirt.
<br>
<br>
Most of them are
<strong>
outdated
</strong>
, but provide historical design context.
<br>
<br>
They are
<strong>
not
</strong>
user documentation and should not be treated as such.
<br>
<br>
<a href='/documentation/'>Documentation is available here.</a>
</div>
<h1 id="hosts-hardware-information">Host's Hardware Information</h1>

<h2 id="summary">Summary</h2>

<p>When assigning new host to oVirt engine the engine retrieves general information about the host. This information includes Vdsm version, CPU units and inc. This article describes the hardware information that the host provides to oVirt engine.</p>

<h2 id="owner">Owner</h2>

<ul>
  <li>Name: Yaniv Bronhaim (ybronhei)</li>
</ul>

<!-- -->

<ul>
  <li>Email: ybronhei@redhat.com</li>
</ul>

<h2 id="current-status">Current status</h2>

<ul>
  <li>Target Release: 3.2</li>
  <li>Status: Work In Progress</li>
  <li>Last updated date: Nov 20 2012</li>
</ul>

<h2 id="detailed-description">Detailed Description</h2>

<p>The following feature allows the user interface to present host's hardware information when adding new hypervisor.
This information is taken by using dmidecode command, this command runs with root permissions over the host and returns the information with getVdsHardwareInfo API method. This returns the following fields[1]:</p>
<ol>
  <li>
    <p>Host Manufacturer - Manufacturer of the host's machine and hardware' vendor (e.g LENOVO)</p>

    <p>2. Host Version - For each host the manufacturer gives a unique name (e.g. Lenovo T420s)
  3. Host Product Name - ID of the product - same for all similar products (e.g 4174BH4)
  4. Host UUID - Unique ID for each host (e.g E03DD601-5219-11CB-BB3F-892313086897)
  5. Host Family - Type of host's CPU - (e.g Core i5)
  6. Host Serial Number - Unique ID for host's chassis (e.g R9M4N4G)</p>
  </li>
</ol>

<p>The following parameters below are suggested to be added:</p>

<div class="highlight"><pre class="highlight plaintext"><code>  7. BIOS Revision&#x000A;  8. BIOS Version&#x000A;  9. BIOS is upgradable&#x000A;  10. BIOS Vendor&#x000A;  11. BIOS Release Date&#x000A;&#x000A;  12. Processor Version&#x000A;  13. Processor Core Count&#x000A;  14. Processor Vendor&#x000A;  15. Processor Core Enabled&#x000A;  16. Processor Current Speed&#x000A;  17. Processor Max Speed&#x000A;  18. Processor Thread Count&#x000A;&#x000A;  19. Chassis Asset Tag&#x000A;  20. Chassis Serial Number&#x000A;  21. Chassis Manufacturer&#x000A;&#x000A;  22. Memory Serial Number&#x000A;  23. Memory Total Width&#x000A;  24. Memory Number of Devices&#x000A;  25. Memory Manufacturer&#x000A;  26. Memory Data Width&#x000A;  27. Memory Error Correction Type&#x000A;  28. Memory Maximum Capacity&#x000A;  29. Memory Type Detail&#x000A;  30. Memory Speed&#x000A;  31. Memory Size&#x000A;</code></pre></div>
<p>[1] More parameters can be added on request.</p>

<h3 id="user-experience">User Experience</h3>

<p>Under Hosts tab we have general information about the chosen host. In this tab you see general information that was retrieved from the host:
<img alt="" width="579" height="342" src="/images/wiki/General-tab.png?1560777613" />
This feature adds new host's sub-tab called Hardware Information. Hardware Information will display the following fields:
<img alt="" width="471" height="253" src="/images/wiki/Bios.png?1560777613" /></p>

<h3 id="vdsm-flow">VDSM Flow</h3>

<p>When Vdsm receives getVdsHardwareInfo request, it retrieves the hardware information by using python-dmidecode utility. After collecting and arranging the information, Vdsm delivers it to engine by xml rpc.</p>

<h3 id="engine-flow">Engine Flow</h3>

<h2 id="when-refreshing-hosts-capabilities-we-call-to-getvdshardwareinfo-on-update-this-information-is-written-to-the-database-to-vds_dynamic-table-with-other-all-host-information">When refreshing host's capabilities we call to getVdsHardwareInfo, On update this information is written to the database to vds_dynamic table with other all host information.</h2>
<p>Short explanation about vds tables:
We have 3 tables that engine works with - vds_static, vds_dynamic, vds_statistics, all goes to one view that is called VDS
vds_statistics includes fields that get updated every 2 sec (highest frequency)
vds_static includes fields that get changed threw the UI like IP, CPU Cores (that can be specified by the user) and more configurable data.
vds_dynamic includes host information that retrieved from specific vds
Hardware information needs to be part of the vds dynamic information and retrieved in constants intervals or cases by API request from host (as get capabilities)
—-
 This information is mapped to Vds entity and kept there, when mapping to UI we use those parameters to build the Host entity.</p>

<h3 id="rest-api">REST API</h3>

<p>The host's Hardware parameters is shown via engine rest API under host object as the following:</p>
<hardware_information>

` `<manufacturer>`Dell Inc.`</manufacturer>
` `<version>`01`</version>
` `<serial_number>`H2CQ95J`</serial_number>
` `<product_name>`OptiPlex 790`</product_name>
` `<uuid>`4C4C4544-0032-4310-8051-C8C04F39354A`</uuid>
` `<family>`Core i7`</family>
</hardware_information>

<h2 id="dmidecode-output">dmidecode Output</h2>

<h3 id="system-information">System Information</h3>

<p>dmi_type - 1
SKU Number - Not Specified
UUID - E03DD601-5219-11CB-BB3F-892313086897
Family - ThinkPad T420s
Serial Number - R9M4N4G
Version - ThinkPad T420s
Wake-Up Type - Power Switch
Product Name - 4174BH4
dmi_handle - 0x0010
dmi_size - 27
Manufacturer - LENOVO</p>

<h3 id="bios-information">Bios Information</h3>

<p>NEC PC-98 - False
EDD is supported - True
PC Card (PCMCIA) is supported - False
I2O boot - False
3.5"/2.88 MB floppy services are supported (int 13h) - False
BIOS Revision - 1.31
ATAPI Zip drive boot - False
Version - 8CET51WW (1.31 )
BIOS is upgradeable - True
Smart battery - False
8042 keyboard services are supported (int 9h) - True
BIOS shadowing is allowed - True
BIOS ROM is socketed - False
USB legacy - True
APM is supported - False
AGP - False
PNP is supported - True
VLB is supported - False
Vendor - LENOVO
ISA is supported - False
Japanese floppy for Toshiba 1.2 MB is supported (int 13h) - False
CGA/mono video services are supported (int 10h) - True
Serial services are supported (int 14h) - True
5.25"/360 KB floppy services are supported (int 13h) - False
Address - 0xe0000
ROM Size - 8192 KB
Function key-initiated network boot - True
Currently Installed Language - ['en-US']
Runtime Size - 128 KB
Targeted content distribution - False
3.5"/720 KB floppy services are supported (int 13h) - True
Relase Date - 11/29/2011
BIOS boot specification - True
MCA is supported - False
PCI is supported - True
5.25"/1.2 MB floppy services are supported (int 13h) - False
dmi_handle - 0x002d
Selectable boot is supported - True
dmi_type - 13
Japanese floppy for NEC 9800 1.2 MB is supported (int 13h) - False
EISA is supported - False
Print screen service is supported (int 5h) - True
Boot from PC Card (PCMCIA) is supported - False
Printer services are supported (int 17h) - True
ESCD support is available - False
dmi_size - 22
Boot from CD is supported - True
Installed Languages - 1
ACPI - True
LS-120 boot - False
IEEE 1394 boot - False</p>

<h3 id="cache-information">Cache Information</h3>

<p>dmi_type - 7
System Type - Data
Socket Designation - L2-Cache
Installed SRAM Type - [None, None, None, None, None, 'Synchronous', None]
Level - 2
Socketed - False
Associativity - 8-way Set-associative
Supported SRAM Type - [None, None, None, None, None, 'Synchronous', None]
Enabled - True
Maximum Size - 256 KB
dmi_handle - 0x0003v Installed Size - 256 KB
Location - Internal
Error Correction Type - Single-bit ECC
Speed - Unknown
Operational Mode - Write Through
dmi_size - 19</p>

<h3 id="processor-information">Processor Information</h3>

<p>Upgrade - ZIF Socket
Socket Designation - CPU
L2 Cache Handle - 0x0003
Version - Intel(R) Core(TM) i5-2540M CPU @ 2.60GHz
Type - Central Processor
Core Count - 2
Status - Populated:Enabled
Vendor - Intel(R) Corporation
Core Enabled - 2
dmi_handle - 0x0001
External Clock - 100
Serial Number - Not Supported by CPU
Current Speed - 2600
dmi_size - 42
L3 Cache Handle - 0x0004
Part Number - None
Asset Tag - None
Signature - None
L1 Cache Handle - 0x0002
ID - a7 06 02 00 ff fb eb bf
dmi_type - 4
Family -
Characteristics - ['64-bit capable']
Voltage - 1.2 V
Max Speed - 2600
Thread Count - 4</p>

<h3 id="chassis-information">Chassis Information</h3>

<p>dmi_type - 3
Type - Notebook
Power Supply State - Unknown
Thermal State - Unknown
Asset Tag - RH0003183
Serial Number - R9M4N4G
Version - Not Available
Lock - Not Present
Security Status - Unknown
Boot-Up State - Unknown
dmi_handle - 0x0012
dmi_size - 21
Manufacturer - LENOVO</p>

<h3 id="memory-information">Memory Information</h3>

<p>Use - System Memory
Location - System Board Or Motherboard
Type -
Array Handle - 0x0005
Number Of Devices - 2
Serial Number - 340F5D7F
Total Width - 64 bit
Form Factor - SODIMM
dmi_size - 15
Manufacturer - Kingston
Data Width - 64 bit
Part Number - 99U5428-046.A00LF
AssetTag - 9876543210
Bank Locator - BANK 2
Error Correction Type - None
dmi_handle - 0x0005
dmi_type - 16
Maximum Capacity - 16 GB
Set - None
Error Information Handle - Not Provided
Locator - ChannelB-DIMM0
Type Detail - [None, None, None, None, None, None, 'Synchronous', None, None, None, None, None]
Speed - 1333 MHz (0.8ns)
Size - 4096 MB</p>

<p><a href="/develop/release-management/features/">HostHardwareInfo</a> <a href="/develop/release-management/releases/3.2/feature/">HostHardwareInfo</a></p>

</section>
</section>
</section>
<footer class='text-center' id='footer'>
<hr class='visible-print'>
<ul class='footer-nav-list'>
<li><a target="_blank" href="../../../../site/privacy-policy.html">Privacy policy</a></li>
<li><a target="_blank" href="../../../../community/about.html">About</a></li>
<li><a target="_blank" href="../../../../site/general-disclaimer.html">Disclaimers</a></li>
</ul>

&copy; 2013&ndash;2019 oVirt
<div class='edit-this-page'>
<a target="_blank" href="https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/source/develop/release-management/features/infra/hosthardwareinfo.html.md&amp;template="><i class="icon fa fa-github"></i>Report an issue with this page</a>
</div>
<div class='edit-this-page'>
<a target="_blank" href="https://github.com/oVirt/ovirt-site/edit/master/source/develop/release-management/features/infra/hosthardwareinfo.html.md"><i class="icon fa fa-github"></i>Edit this page</a>
</div>
<div class='last-modified'>
Page last modified
Sun 13 Aug 2017 13:43 UTC
</div>
        <script type="text/javascript">
        var _paq = _paq || [];
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://stats.phx.ovirt.org/";
        _paq.push(['setTrackerUrl', u+'piwik.php']);
        _paq.push(['setSiteId', 1]);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
        g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
        </script>
<noscript><p><img src="https://stats.phx.ovirt.org/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
</footer>


<script src="/javascripts/application.js?1560777657" type="text/javascript"></script>

</body>
</html>
