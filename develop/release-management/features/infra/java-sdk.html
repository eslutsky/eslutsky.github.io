<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8 lt-ie7" lang="en-us"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8" lang="en-us"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie10 lt-ie9" lang="en-us"> <![endif]-->
<!--[if IE 9]> <html class="no-js lt-ie10 lt-ie9" lang="en-us"> <![endif]-->
<!--[if lt IE 10]> <html class="no-js lt-ie10" lang="en-us"> <![endif]-->
<!--[if !IE]> > <![endif]-->
<html class='no-js' lang='en'>
<!-- <![endif] -->
<head>
<title>
Java-sdk &mdash;
oVirt
</title>
<meta charset='utf-8'>
<meta content='' name='description'>
<meta content='' name='author'>
<meta content='initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width' name='viewport'>

<link href='/images/favicon.ico' rel='shortcut icon'>
<link href='/images/apple-touch-icon-precomposed.png' rel='apple-touch-icon-precomposed'>
<link href='/images/apple-touch-icon-57x57-precomposed.png' rel='apple-touch-icon-precomposed' sizes='57x57'>
<link href='/images/apple-touch-icon-72x72-precomposed.png' rel='apple-touch-icon-precomposed' sizes='72x72'>
<link href='/images/apple-touch-icon-114x114-precomposed.png' rel='apple-touch-icon-precomposed' sizes='114x114'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>
<link href="/stylesheets/application.css?1560777611" rel="stylesheet" type="text/css" />
<link href="/stylesheets/print.css?1560777612" rel="stylesheet" type="text/css" media="print" />
</head>
<body class=' source-md'>
<header class='masthead hidden-print' id='branding' role='banner'>
<section class='hgroup'></section>
<div id='access'>
<nav id="mainNav" class="navbar-fixed-top affix-top navForMobileHack" style="font-family: 'Open Sans', sans-serif; display: flex; justify-content: center;">
      <a href="/"><img id="logo" style="float: left; margin-right: 70px; height: 40px; padding: 0; margin-top: 12px;" alt="oVirt" src="/images/logo.svg"></a>
      <div>
          <div class="navbar-header page-scroll" style="min-width: 170px">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu_id0980fddf">
                  <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
              </button>
          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="menu_id0980fddf">

              <ul class="nav navbar-nav">
                  <li class="hidden active">
                      <a href="#page-top"></a>
                  </li>
<li role='menuitem'>
  <a href='/'>Home</a>
</li>

<li role='menuitem'>
  <a href='/download/'>Download</a>
</li>

<li role='menuitem'>
  <a href='/documentation/'>Documentation</a>
</li>

<li role='menuitem'>
  <a href='/develop/'>Developers</a>
</li>

<li role='menuitem'>
  <a href='/community/'>Community</a>
</li>

<li role='menuitem'>
  <a href='//lists.ovirt.org/archives/'>Forum</a>
</li>

<li role='menuitem'>
  <a href='/blog/'>Blog</a>
</li>

              </ul>
          </div>
          <!-- /.navbar-collapse -->
      </div>
      <!-- /.container-fluid -->
  </nav>

</div>
</header>

<section class='page-wrap' id='page-wrap'>
<section class='page' id='page'>
<ul class='breadcrumb'>
<li><a href="/develop/">Develop</a></li>
<li><a href="/develop/release-management/">Release-management</a></li>
<li><a href="/develop/release-management/features/">Features</a></li>
<li><a href="/develop/release-management/features/infra/">Infra</a></li>
</ul>

<section class='container content' id='content'>
<div class='alert alert-warning'>
Feature pages are design documents that developers have created while collaborating on oVirt.
<br>
<br>
Most of them are
<strong>
outdated
</strong>
, but provide historical design context.
<br>
<br>
They are
<strong>
not
</strong>
user documentation and should not be treated as such.
<br>
<br>
<a href='/documentation/'>Documentation is available here.</a>
</div>
<h1 id="java-sdk">Java-sdk</h1>

<p>The oVirt Java-SDK is an automatically generated software development kit for the oVirt engine API. This software development kit allows you to develop Java-based applications for automating a variety of complex administrative tasks in oVirt.</p>

<p><strong>TOC</strong></p>

<h2 id="concepts">Concepts</h2>

<ul>
  <li>Auto-Generated</li>
  <li>Complete protocol abstraction.</li>
  <li>Full compliance with the oVirt api architecture.</li>
  <li>Self descriptive.</li>
  <li>Intuitive and easy to use.</li>
</ul>

<h2 id="ide-examples">IDE Examples</h2>

<h3 id="creating-the-proxy">Creating the proxy:</h3>

<hr />

<p><img alt="" width="1378" height="639" src="/images/wiki/0-1jdk.png?1560777612" /></p>

<h4 id="authenticating-using-user-name-and-password">Authenticating using user name and password:</h4>

<p><img alt="" width="772" height="222" src="/images/wiki/0-1-1jdk.png?1560777612" /></p>

<h4 id="authenticating-using-sessionid">Authenticating using sessionid:</h4>

<p><img alt="" width="760" height="237" src="/images/wiki/0-1-2jdk.png?1560777612" /></p>

<h3 id="listing-all-collections">Listing all collections:</h3>

<hr />

<p><img alt="" width="970" height="732" src="/images/wiki/1jsdk.png?1560777612" /></p>

<h3 id="listing-the-methods-of-a-collection">Listing the methods of a collection:</h3>

<hr />

<p><img alt="" width="1045" height="724" src="/images/wiki/2jdk.png?1560777612" /></p>

<h3 id="querying-a-collection-using-a-ovirt-search-engine-query-and-custom-constraints">Querying a collection using a oVirt search engine query and custom constraints:</h3>

<hr />

<p><img alt="" width="1034" height="512" src="/images/wiki/3jdk.png?1560777613" /></p>

<h3 id="accessing-resource-methods-and-properties">Accessing resource methods and properties:</h3>

<hr />

<p><img alt="" width="975" height="833" src="/images/wiki/4jdk.png?1560777613" /></p>

<h3 id="creating-a-resource">Creating a resource:</h3>

<hr />

<p><img alt="" width="974" height="756" src="/images/wiki/5jdk.png?1560777613" /></p>

<h3 id="accessing-resource-properties-and-sub-collections">Accessing resource properties and sub-collections:</h3>

<hr />

<p><img alt="" width="1048" height="790" src="/images/wiki/6jdk.png?1560777613" /></p>

<h3 id="accessing-sub-collection-methods">Accessing sub-collection methods:</h3>

<hr />

<p><img alt="" width="990" height="665" src="/images/wiki/7jdk.png?1560777613" /></p>

<h3 id="querying-a-sub-collection-using-custom-constraints">Querying a sub-collection using custom constraints:</h3>

<hr />

<p>TBD</p>

<h3 id="retrieving-a-sub-collection-resource">Retrieving a sub-collection resource:</h3>

<hr />

<p><img alt="" width="776" height="464" src="/images/wiki/8jdk.png?1560777613" /></p>

<h3 id="accessing-sub-collection-resource-properties-and-methods">Accessing sub-collection resource properties and methods:</h3>

<hr />

<p><img alt="" width="962" height="690" src="/images/wiki/9jdk.png?1560777613" /></p>

<h2 id="examples">Examples</h2>

<h3 id="create-proxy">create proxy</h3>

<div class="highlight"><pre class="highlight plaintext"><code>     // #1 - import&#x000A;     import org.ovirt.engine.sdk.Api;&#x000A;&#x000A;     // #2 - create proxy&#x000A;     Api api = new Api("`[`http://localhost:8080/api`](http://localhost:8080/api)`", "user@domain", "password");&#x000A;</code></pre></div>
<h3 id="list-entities">list entities</h3>

<div class="highlight"><pre class="highlight plaintext"><code>     // #1 - list resources&#x000A;     List`&lt;VM&gt;` vms = api.getVMs().list();&#x000A;</code></pre></div>
<h3 id="update-resource">update resource</h3>

<div class="highlight"><pre class="highlight plaintext"><code>     // #1 - fetch resource&#x000A;     VM vm = api.getVMs().get("test");&#x000A;&#x000A;     // #2 - modify it&#x000A;     vm.setDescription("java_sdk");&#x000A;&#x000A;     // #3 - update it&#x000A;     VM newVM = vm.update();&#x000A;</code></pre></div>
<h3 id="get-resource-by-name">get resource by name</h3>

<div class="highlight"><pre class="highlight plaintext"><code>     // #1 - fetch resource using name&#x000A;     VM vm = api.getVMs().get("test");&#x000A;</code></pre></div>
<h3 id="get-resource-by-id">get resource by id</h3>

<div class="highlight"><pre class="highlight plaintext"><code>     // #1 - fetch resource using id&#x000A;     VM vm = api.getVMs().get(UUID.fromString("5a89a1d2-32be-33f7-a0d1-f8b5bc974ff6"));&#x000A;</code></pre></div>
<h3 id="add-resource">add resource</h3>

<div class="highlight"><pre class="highlight plaintext"><code>     // #1 - create parameters&#x000A;     org.ovirt.engine.sdk.entities.VM vmParams = new org.ovirt.engine.sdk.entities.VM();&#x000A;     vmParams.setName("myVm");&#x000A;     vmParams.setCluster(api.getClusters().get("myCluster"));&#x000A;     vmParams.setTemplate(api.getTemplates().get("myTemplate"));&#x000A;&#x000A;     // #2 - add resource&#x000A;     VM vm = api.getVMs().add(vmParams);&#x000A;&#x000A;     or&#x000A;&#x000A;     // #1 - create parameters&#x000A;     org.ovirt.engine.sdk.entities.VM vmParams = new org.ovirt.engine.sdk.entities.VM();&#x000A;     vmParams.setName("myVm");&#x000A;     org.ovirt.engine.sdk.entities.Cluster clusterParam = new Cluster();&#x000A;     clusterParam.setName("myCluster");&#x000A;     vmParams.setCluster(clusterParam);&#x000A;     org.ovirt.engine.sdk.entities.Template templateParam = new Template();&#x000A;     templateParam.setName("myTemplate");&#x000A;     vmParams.setTemplate(templateParam);&#x000A;&#x000A;     // #2 - add resource&#x000A;     VM vm = api.getVMs().add(vmParams);&#x000A;</code></pre></div>
<h3 id="perform-an-action-on-resource">perform an action on resource</h3>

<div class="highlight"><pre class="highlight plaintext"><code>     // #1 - fetch resource&#x000A;     VM vm = api.getVMs().get("test");&#x000A;&#x000A;     // #2 - create params&#x000A;     Action actionParam = new Action();&#x000A;     org.ovirt.engine.sdk.entities.VM vmParam = new org.ovirt.engine.sdk.entities.VM();&#x000A;     actionParam.setVm(vmParam);&#x000A;&#x000A;     // #3 - perform an action&#x000A;     Action res = vm.start(actionParam);&#x000A;&#x000A;     or&#x000A;&#x000A;     // #1 - fetch resource&#x000A;     VM vm = api.getVMs().get("test");&#x000A;&#x000A;     // #2 - create params + perform an action&#x000A;     Action res = vm.start(new Action() {&#x000A;         {&#x000A;             setVm(new org.ovirt.engine.sdk.entities.VM());&#x000A;         }&#x000A;     });&#x000A;</code></pre></div>
<h3 id="list-sub-resources">list sub-resources</h3>

<div class="highlight"><pre class="highlight plaintext"><code>     // #1 - fetch resource&#x000A;     VM vm = api.getVMs().get("test");&#x000A;&#x000A;     // #2 - list sub-resources&#x000A;     List`&lt;VMDisk&gt;` disks = vm.getDisks().list();  &#x000A;</code></pre></div>
<h3 id="get-sub-resource">get sub-resource</h3>

<div class="highlight"><pre class="highlight plaintext"><code>     // #1 - fetch resource&#x000A;     VM vm = api.getVMs().get("test");&#x000A;&#x000A;     // #2 - fetch sub-resource&#x000A;     VMDisk disk = vm.getDisks().get("my disk");&#x000A;</code></pre></div>
<h3 id="add-sub-resource-to-resource">add sub-resource to resource</h3>

<div class="highlight"><pre class="highlight plaintext"><code>     // #1 - fetch resource&#x000A;     VM vm = api.getVMs().get("test");&#x000A;&#x000A;     // #2 - create parameters&#x000A;     Disk diskParam = new Disk();&#x000A;     diskParam.setProvisionedSize(1073741824L);&#x000A;     diskParam.setInterface("virtio");&#x000A;     diskParam.setFormat("cow");&#x000A;&#x000A;     // #3 - add sub-resource&#x000A;     Disk disk = vm.getDisks().add(diskParam);&#x000A;</code></pre></div>
<h3 id="update-sub-resource">update sub-resource</h3>

<div class="highlight"><pre class="highlight plaintext"><code>     // #1 - fetch resource&#x000A;     VM vm = api.getVMs().get("test");&#x000A;&#x000A;     // #2 - fetch sub-resource&#x000A;     VMDisk disk = vm.getDisks().get("test_Disk1");&#x000A;&#x000A;     // #3 - modify sub-resource&#x000A;     disk.setAlias("test_Disk1_updated");&#x000A;&#x000A;     // #4 - update it&#x000A;     VMDisk updateDisk = disk.update();&#x000A;</code></pre></div>
<h3 id="run-action-on-sub-resource">run action on sub-resource</h3>

<div class="highlight"><pre class="highlight plaintext"><code>     // #1 - fetch resource&#x000A;     VM vm = api.getVMs().get("test");&#x000A;&#x000A;     // #2 - fetch sub-resource&#x000A;     VMDisk disk = vm.getDisks().get("test_Disk1");&#x000A;&#x000A;     // #3 - create parameters&#x000A;     Action actionParam = new Action();&#x000A;&#x000A;     // #4 - run an action on sub-resource&#x000A;     Action result = disk.activate(actionParam);&#x000A;</code></pre></div>
<h3 id="best-practices">Best Practices</h3>

<p>The api should be shutdown in a finally block so daemon resources are freed:</p>

<div class="highlight"><pre class="highlight plaintext"><code>   Api api = new Api(URL, USER, PASSWORD);&#x000A;   try {&#x000A;       api.api.getDataCenters().add(new DataCenter());&#x000A;       ...&#x000A;   } finally {&#x000A;       api.shutdown();&#x000A;   }&#x000A;</code></pre></div>
<h2 id="working-with-ssl-secure-socket-layer">Working with SSL (Secure Socket Layer)</h2>

<p>The oVirt Java software development kit provides full support for HTTP over Secure Sockets Layer (SSL) or IETF Transport Layer Security (TLS) protocols by leveraging the Java Secure Socket Extension (JSSE). JSSE has been integrated into the Java 2 platform as of version 1.4 and works with Java-SDK out of the box. On older Java 2 versions, JSSE must be manually installed and configured. Installation instructions can be found at <a href="http://java.sun.com/products/jsse/doc/guide/API_users_guide.html#Installation">here</a>.</p>

<p>Once you have correctly installed JSSE, secure HTTP communication over SSL should be as simple as plain HTTP communication. However, you must supply the Java software development kit with a KeyStore containing the host CA certificate to validate the destination host identity:</p>

<h3 id="generating-the-truststore">Generating the truststore</h3>

<p>1 Download oVirt host CA certificate from</p>

<p><code>   </code><a href="https://host:port/ca.crt"><code>https://host:port/ca.crt</code></a></p>

<ol>
  <li>
    <p>Generate keystore</p>

    <p>   keytool -import -alias "server.crt truststore" -file server.crt -keystore server.truststore</p>
  </li>
</ol>

<h3 id="make-java-sdk-aware-of-the-keystore">Make Java-SDK aware of the keystore</h3>

<p>this can be achieved in one of two ways:</p>

<ol>
  <li>
    <p>Via default keystore lookup path</p>

    <p>   mkdir ~/.ovirtsdk/
      cp server.truststore ~/.ovirtsdk/ovirtsdk-keystore.truststore</p>
  </li>
</ol>

<p>Once the ovirtsdk-keystore.truststore installed in the ~/.ovirtsdk, it will be used for host identity validation upon handshake with the destination host.</p>

<ol>
  <li>Via a custom truststore</li>
</ol>

<p>Use this signature: Api(String url, String username, String password, String keyStorePath)</p>

<div class="highlight"><pre class="highlight plaintext"><code>     Api api = new Api(url, user, password, "/path/server.truststore");&#x000A;</code></pre></div>
<h3 id="disable-host-identity-validation">Disable host identity validation</h3>

<p>This method SHOULD NOT be used for productive systems due to security reasons, unless it is a conscious decision and you are perfectly aware of security implications of not validating host identity.</p>

<p>use this signature: Api(String url, String username, String password, boolean noHostVerification)</p>

<div class="highlight"><pre class="highlight plaintext"><code>     Api api = new Api(url, user, password, true);&#x000A;</code></pre></div>
<h2 id="deployment">Deployment</h2>

<h3 id="maven-deployment">Maven deployment</h3>

<ol>
  <li>add mvn-releases repository to your ~/.m2/settings.xml under <repositories></repositories></li>
</ol>

<p><code>   </code><repository>
`       `<id>`mvn-releases`</id>
`       `<url>[`https://oss.sonatype.org/content/repositories/releases`](https://oss.sonatype.org/content/repositories/releases)</url>
`       `<releases>
`       `</releases>
`       `<snapshots>
`           `<enabled>`false`</enabled>
`       `</snapshots>
`   `</repository></p>

<ol>
  <li>add sdk dependency to your project pom.xml</li>
</ol>

<p><code>   </code><dependency>
`       `<groupId>`org.ovirt.engine.sdk`</groupId>
`       `<artifactId>`ovirt-engine-sdk-java`</artifactId>
`       `<version>`x.y.z.q-v`</version>
`       `<type>`jar`</type>
`       `<scope>`compile`</scope>
`   `</dependency></p>

<div class="highlight"><pre class="highlight plaintext"><code>         "x.y.z.q-v" is a latest sdk release (list of available releases can be found at `[`java-sdk-changelog`](java-sdk-changelog)`)&#x000A;</code></pre></div>
<ol>
  <li>
    <p>deploy sdk dependencies and javadoc</p>

    <p>     mvn dependency:resolve -Dclassifier=javadoc</p>
  </li>
  <li>
    <p>compile</p>

    <p>      mvn clean install</p>
  </li>
</ol>

<h3 id="development-deployment">Development deployment</h3>

<h4 id="code-generation">Code generation</h4>

<div class="highlight"><pre class="highlight plaintext"><code>       1. pull + compile + deploy latest ovirt-engine sources&#x000A;       2. cd ovirt-engine-sdk-java-codegen&#x000A;       3. compile&#x000A;       4. run (this will generate sdk from the ovirt-engine)&#x000A;</code></pre></div>
<h4 id="development">Development</h4>

<div class="highlight"><pre class="highlight plaintext"><code>       all SDK development is done on the ovirt-engine-sdk-java-codegen project,&#x000A;       i.e if you have yet not supported funcionality in SDK, this is a place to add&#x000A;       support for it.&#x000A;</code></pre></div>
<h2 id="todo-list">TODO list</h2>

<ol>
  <li>
    <p>generate entry-point (/api) methods (done)</p>
  </li>
  <li>
    <p>generate searchable list() methods (done)</p>
  </li>
  <li>
    <p>generate method/s overloads using header/url params (done)</p>
  </li>
  <li>
    <p>generate delete method/s overloads with body (done)</p>
  </li>
  <li>
    <p>support persistent authentication (done)</p>
  </li>
  <li>
    <p>implement SSL support (done)</p>
  </li>
  <li>
    <p>implement SSL CA certificate validation (done)</p>
  </li>
  <li>
    <p>implement client validation</p>
  </li>
  <li>
    <p>allow setters generation for collection based fields in org.ovirt.engine.sdk.entities</p>
  </li>
  <li>
    <p>implement in collection.get(name) search using engine.search</p>
  </li>
  <li>
    <p>implement timeout in SDK constructor</p>
  </li>
  <li>
    <p>implement sdk debug mode (done)</p>
  </li>
  <li>
    <p>remove @SuppressWarnings("unused") from decorators</p>
  </li>
  <li>
    <p>move get/list methods from the decorators to the parent classes</p>
  </li>
  <li>
    <p>implement unique treatment for COLLECTION2ENTITY pattern exceptions (in-progress)</p>
  </li>
  <li>
    <p>implement logger in codegen</p>
  </li>
  <li>
    <p>add deployment capabilities (done)</p>
  </li>
  <li>
    <p>upload artifacts to mvn repo (done)</p>
  </li>
  <li>
    <p>Implement querying collections using custom constraint.</p>
  </li>
  <li>
    <p>in doc change parameters format to javaDoc style (done)</p>
  </li>
  <li>
    <p>make API.java thread safe (done)</p>
  </li>
</ol>

<h2 id="change-log">Change Log</h2>

<p><a href="/develop/sdk/java-sdk-changelog/">java-sdk-changelog</a></p>

<h2 id="maintainers">Maintainers</h2>

<p>Michael Pasternak: mishka8520@yahoo.com, Juan Hernandez: juan.hernandez@redhat.com</p>


</section>
</section>
</section>
<footer class='text-center' id='footer'>
<hr class='visible-print'>
<ul class='footer-nav-list'>
<li><a target="_blank" href="../../../../site/privacy-policy.html">Privacy policy</a></li>
<li><a target="_blank" href="../../../../community/about.html">About</a></li>
<li><a target="_blank" href="../../../../site/general-disclaimer.html">Disclaimers</a></li>
</ul>

&copy; 2013&ndash;2019 oVirt
<div class='edit-this-page'>
<a target="_blank" href="https://github.com/oVirt/ovirt-site/issues/new?labels=content&amp;title=Issue:%20/source/develop/release-management/features/infra/java-sdk.html.md&amp;template="><i class="icon fa fa-github"></i>Report an issue with this page</a>
</div>
<div class='edit-this-page'>
<a target="_blank" href="https://github.com/oVirt/ovirt-site/edit/master/source/develop/release-management/features/infra/java-sdk.html.md"><i class="icon fa fa-github"></i>Edit this page</a>
</div>
<div class='last-modified'>
Page last modified
Wed 12 Jul 2017 17:57 UTC
</div>
        <script type="text/javascript">
        var _paq = _paq || [];
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://stats.phx.ovirt.org/";
        _paq.push(['setTrackerUrl', u+'piwik.php']);
        _paq.push(['setSiteId', 1]);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
        g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
        </script>
<noscript><p><img src="https://stats.phx.ovirt.org/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
</footer>


<script src="/javascripts/application.js?1560777657" type="text/javascript"></script>

</body>
</html>
